{% extends "base.html" %}
{% block content %}

<div style="max-width: 900px; margin: 0 auto;">
  <!-- User Info Card -->
  <div style="background: var(--card); padding: 32px; border-radius: 20px; box-shadow: var(--shadow); border: 2px solid var(--border); margin-bottom: 32px;">
    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px;">
      <span style="font-size: 64px;">ğŸ‘¤</span>
      <div>
        <h2 style="color: var(--primary-dark); margin: 0 0 8px 0;">User Details</h2>
        <p style="color: var(--text-light); margin: 0;">View user information and chat history</p>
      </div>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
      <div style="padding: 16px; background: var(--bg); border-radius: 12px; border: 2px solid var(--border);">
        <p style="color: var(--text-light); font-size: 13px; margin: 0 0 6px 0; font-weight: 600; text-transform: uppercase;">ğŸ“§ Email</p>
        <p style="color: var(--text); font-size: 16px; margin: 0; font-weight: 500;">{{ user.email }}</p>
      </div>

      <div style="padding: 16px; background: var(--bg); border-radius: 12px; border: 2px solid var(--border);">
        <p style="color: var(--text-light); font-size: 13px; margin: 0 0 6px 0; font-weight: 600; text-transform: uppercase;">ğŸ‘¤ Name</p>
        <p style="color: var(--text); font-size: 16px; margin: 0; font-weight: 500;">{{ user.name or 'Not provided' }}</p>
      </div>

      <div style="padding: 16px; background: var(--bg); border-radius: 12px; border: 2px solid var(--border);">
        <p style="color: var(--text-light); font-size: 13px; margin: 0 0 6px 0; font-weight: 600; text-transform: uppercase;">ğŸ”‘ Role</p>
        <p style="margin: 0;">
          <span style="padding: 6px 16px; border-radius: 8px; font-size: 14px; font-weight: 600; background: {% if user.role == 'admin' %}var(--accent){% else %}var(--primary-light){% endif %}; color: var(--text);">
            {{ user.role|upper }}
          </span>
        </p>
      </div>
    </div>
  </div>

  <!-- Chat History Section -->
  <div style="background: var(--card); padding: 32px; border-radius: 20px; box-shadow: var(--shadow); border: 2px solid var(--border);">
    <h3 style="color: var(--primary-dark); margin: 0 0 24px 0; display: flex; align-items: center; gap: 10px;">
      <span>ğŸ’¬</span> Chat History
    </h3>

    {% if chats %}
      <div style="max-height: 600px; overflow-y: auto;">
        {% for c in chats %}
          <div style="margin-bottom: 24px; padding: 20px; background: var(--bg); border-radius: 16px; border: 2px solid var(--border);">
            <!-- User Message -->
            <div style="margin-bottom: 16px;">
              <p style="color: var(--primary-dark); font-weight: 600; margin: 0 0 8px 0; font-size: 14px;">
                ğŸ‘¤ User:
              </p>
              <p style="color: var(--text); margin: 0; line-height: 1.6; padding: 12px 16px; background: white; border-radius: 10px;">
                {{ c.user_message }}
              </p>
            </div>

            <!-- Bot Response -->
            <div>
              <p style="color: var(--secondary); font-weight: 600; margin: 0 0 8px 0; font-size: 14px;">
                ğŸ¤– Bot:
              </p>
              <p style="color: var(--text); margin: 0; line-height: 1.6; padding: 12px 16px; background: white; border-radius: 10px;">
                {{ c.bot_response }}
              </p>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div style="text-align: center; padding: 48px 24px; color: var(--text-light);">
        <span style="font-size: 64px; display: block; margin-bottom: 16px;">ğŸ’­</span>
        <p style="font-size: 16px; margin: 0;">No chat history found for this user.</p>
        <p style="font-size: 14px; margin-top: 8px;">Conversations will appear here once the user starts chatting.</p>
      </div>
    {% endif %}

    <div style="margin-top: 24px; text-align: center;">
      <a href="{{ url_for('admin_dashboard') }}" class="btn">â† Back to Dashboard</a>
    </div>
  </div>
</div>

{% endblock %}